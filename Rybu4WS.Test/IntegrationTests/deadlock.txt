server Resource1 {
    var a: 0..1 = 0;
    { Lock | a == 0 } -> { a = 1; return :ok; }
    { Unlock | a == 1 } -> { a = 0; return :ok; }
}

server Resource2 {
    var a: 0..1 = 0;
    { Lock | a == 0 } -> { a = 1; return :ok; }
    { Unlock | a == 1 } -> { a = 0; return :ok; }
}

process First {
    Resource1.Lock();
    Resource2.Lock();
    terminate;
}

process Second {
    Resource2.Lock();
    Resource1.Lock();
    terminate;
}